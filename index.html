<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Manajemen Masalah Barang (Supabase)</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* bg-slate-50 */
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #aab2c0;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #888;
        }
        /* Style for preventing background scroll when modal is open */
        .modal-open {
            overflow: hidden;
        }
        
        /* Menu Sidebar Styles */
        #menu-sidebar {
            transition: transform 0.3s ease-in-out;
            transform: translateX(-100%);
        }
        #menu-sidebar.open {
            transform: translateX(0);
        }
        #menu-overlay {
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
        }
        #menu-overlay.opacity-100 {
            opacity: 1;
        }

        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #4f46e5; /* indigo-600 */
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <!-- Global Hamburger Button -->
    <button id="menu-btn-global" class="fixed top-6 left-6 p-2 rounded-lg text-slate-600 hover:bg-slate-200 z-40 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>
    
    <!-- Menu Sidebar -->
    <div id="menu-overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40"></div>
    <div id="menu-sidebar" class="fixed top-0 left-0 w-64 h-full bg-slate-900 text-white shadow-lg z-50 p-6 flex flex-col">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-xl font-bold text-white">Menu</h2>
            <button id="close-menu-btn" class="p-1 rounded-full hover:bg-slate-700 text-slate-400 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
        <nav>
            <ul>
                <li>
                    <a href="#" id="menu-home-btn" class="flex items-center space-x-3 px-3 py-3 rounded-lg text-slate-300 hover:bg-indigo-600 hover:text-white transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                        <span>Home</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="menu-admin-btn" class="flex items-center space-x-3 px-3 py-3 rounded-lg text-slate-300 hover:bg-indigo-600 hover:text-white transition-colors">
                         <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                        <span>Login Admin</span>
                    </a>
                </li>
            </ul>
        </nav>
        <div class="mt-auto">
             <p id="connection-status" class="text-xs text-slate-400">Menghubungkan...</p>
        </div>
    </div>

    <div id="app" class="min-h-screen flex flex-col items-center p-4 pt-20">

        <!-- Role Selection View (Hidden by default now) -->
        <div id="role-selection-view" class="hidden w-full max-w-md text-center p-4">
            <div class="bg-white p-8 sm:p-10 rounded-2xl shadow-2xl">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTo8y1TczYtwOx2zeS3RJVtM6Eayy6CQZuf6Q&s" alt="Logo Shinpo" class="mx-auto mb-6 h-20 w-auto" onerror="this.src='https.placehold.co/100x100/e2e8f0/64748b?text=Logo'; this.onerror=null;">
                <h1 class="text-3xl md:text-4xl font-extrabold text-slate-900 mb-2">Sistem Inventaris</h1>
                <p class="text-slate-500 mb-8 text-lg">Silakan pilih peran Anda.</p>
                <div class="space-y-4">
                    <button id="admin-role-btn" class="w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-105">Masuk sebagai Admin</button>
                    <button id="operator-role-btn" class="w-full bg-slate-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-105">Masuk sebagai Operator</button>
                </div>
            </div>
        </div>

        <!-- Admin View -->
        <div id="admin-view" class="hidden w-full max-w-6xl mx-auto p-4 md:p-6">
            <div class="flex justify-between items-center mb-8 relative">
                 <h1 class="text-4xl font-extrabold text-slate-900 text-center w-full tracking-tight">Dashboard Admin</h1>
                 <button id="admin-logout-btn" class="absolute right-0 bg-red-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-red-700 transition-colors shadow-md hover:shadow-lg transform hover:scale-105">Keluar</button>
            </div>
            
            <!-- Form for adding/editing items -->
            <div class="bg-white p-8 rounded-2xl shadow-xl mb-8 border border-slate-200">
                <h2 id="form-title" class="text-2xl font-bold text-slate-800 mb-6">Tambah Barang Baru</h2>
                <form id="item-form" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <input type="hidden" id="item-id">
                    <div>
                        <label for="kode-barang" class="block text-sm font-medium text-slate-700 mb-2">Kode Barang</label>
                        <input type="text" id="kode-barang" required class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition focus:bg-slate-50">
                    </div>
                    <div>
                        <label for="nama-barang" class="block text-sm font-medium text-slate-700 mb-2">Nama Barang</label>
                        <input type="text" id="nama-barang" required class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition focus:bg-slate-50">
                    </div>
                    <div class="md:col-span-2">
                        <label for="permasalahan" class="block text-sm font-medium text-slate-700 mb-2">Permasalahan</label>
                        <textarea id="permasalahan" rows="4" required class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition focus:bg-slate-50"></textarea>
                    </div>
                    <div class="md:col-span-2">
                        <label for="gambar-barang" class="block text-sm font-medium text-slate-700 mb-2">Gambar Barang</label>
                        <input type="file" id="gambar-barang" accept="image/*" class="w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 transition-colors">
                        <img id="image-preview" src="" alt="Pratinjau Gambar" class="hidden mt-4 max-h-40 rounded-lg border border-slate-200 p-1"/>
                    </div>
                    <div class="md:col-span-2 flex justify-end space-x-3">
                         <button type="button" id="cancel-edit-btn" class="hidden bg-slate-200 text-slate-700 font-bold py-3 px-6 rounded-lg hover:bg-slate-300 transition-colors">Batal</button>
                         <button type="submit" id="submit-btn" class="bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors shadow-md hover:shadow-lg">Simpan</button>
                    </div>
                </form>
            </div>

            <!-- List of items -->
            <div id="item-list-container" class="bg-white p-8 rounded-2xl shadow-xl border border-slate-200">
                 <h2 class="text-2xl font-bold text-slate-800 mb-6">Daftar Barang Bermasalah</h2>
                 <div id="item-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Item cards will be injected here -->
                    <div id="loading-spinner-admin" class="md:col-span-2 lg:col-span-3 text-center py-10 flex flex-col items-center">
                        <div class="spinner mb-4"></div>
                        <p class="text-slate-500">Menghubungkan ke database...</p>
                    </div>
                 </div>
            </div>
        </div>
        
        <!-- Operator View -->
        <div id="operator-view" class="hidden w-full max-w-6xl mx-auto p-4 md:p-6">
            <!-- Header -->
            <div class="flex justify-between items-center mb-8 relative">
                <h1 class="text-4xl font-extrabold text-slate-900 text-center w-full tracking-tight">
                    Cari Barang Bermasalah
                </h1>
                <button id="operator-logout-btn" title="Bersihkan Pencarian" class="absolute right-0 bg-amber-500 text-white font-semibold p-3 rounded-lg hover:bg-amber-600 shadow-md hover:shadow-lg transition-all transform hover:scale-105">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                </button>
            </div>

            <!-- Search Section -->
            <div class="bg-gradient-to-r from-indigo-50 to-white p-8 rounded-2xl shadow-xl border border-indigo-100 mb-10">
                <h2 class="text-2xl font-bold text-indigo-700 mb-3">Formulir Pencarian Barang</h2>
                <p class="text-slate-600 mb-5">Masukkan <span class="font-semibold text-indigo-600">kode barang</span> untuk melihat detail permasalahan.</p>
                <div class="flex flex-col md:flex-row gap-4">
                    <input type="text" id="search-input" placeholder="Ketik Kode Barang..." class="flex-1 w-full px-5 py-3 border border-indigo-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white placeholder-slate-400 transition">
                    <button id="search-btn" class="bg-gradient-to-r from-indigo-600 to-violet-600 text-white font-bold py-3 px-8 rounded-lg hover:from-violet-600 hover:to-indigo-600 shadow-md transition-transform transform hover:scale-105 w-full md:w-auto">Cari</button>
                </div>
            </div>

            <!-- Search Result -->
            <div id="search-result" class="hidden mb-10">
                <!-- Hasil pencarian akan muncul di sini -->
            </div>

            <!-- Item List Section -->
            <section id="operator-item-list-container" class="bg-white p-8 rounded-2xl shadow-xl border border-slate-200 my-10">
                <!-- Header -->
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                    <h2 class="text-3xl font-bold text-slate-800 flex items-center gap-3">
                        Daftar Semua Barang
                    </h2>
                </div>

                <!-- Item Grid -->
                <div id="operator-item-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- Loading Spinner -->
                    <div id="loading-spinner-operator" class="col-span-full text-center py-16 flex flex-col items-center">
                        <div class="spinner mb-4"></div>
                        <p class="text-slate-500 text-sm tracking-wide">Menghubungkan ke database...</p>
                    </div>
                    <!-- Item Cards Akan Muncul Di Sini -->
                </div>
            </section>
        </div>

    </div> <!-- End of #app -->
    
    <!-- Image Zoom Modal -->
    <div id="image-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="relative bg-white p-4 rounded-xl shadow-2xl max-w-4xl max-h-[90vh] overflow-auto">
            <button id="close-modal-btn" class="absolute -top-4 -right-4 bg-white rounded-full p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 z-10 shadow-lg">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <img id="modal-img" src="" alt="Detail Gambar Barang" class="w-auto h-auto max-w-full max-h-[80vh] object-contain rounded-lg">
            <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2 bg-black bg-opacity-50 p-2 rounded-lg">
                <button id="zoom-in-btn" class="text-white p-2 rounded-full hover:bg-white/20">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg>
                </button>
                <button id="zoom-out-btn" class="text-white p-2 rounded-full hover:bg-white/20">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Custom Alert/Confirm Modal -->
    <div id="confirm-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-sm">
            <h3 id="confirm-title" class="text-lg font-bold text-slate-800 mb-2">Konfirmasi</h3>
            <p id="confirm-message" class="text-slate-600 mb-6">Apakah Anda yakin?</p>
            <div class="flex justify-end space-x-3">
                <button id="confirm-cancel" class="bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 transition-colors">Batal</button>
                <button id="confirm-ok" class="bg-red-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-red-600 transition-colors">Ya, Hapus</button>
            </div>
        </div>
    </div>
    
    <!-- Password Prompt Modal -->
    <div id="password-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-sm">
            <h3 class="text-lg font-bold text-slate-800 mb-4">Login Admin</h3>
            <form id="password-form">
                <label for="password-input" class="block text-sm font-medium text-slate-600 mb-2">Masukkan Kata Sandi</label>
                <input type="password" id="password-input" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                <p id="password-error" class="text-red-500 text-sm mt-2 hidden">Kata sandi salah.</p>
                <div class="flex justify-end space-x-3 mt-6">
                    <button type="button" id="password-cancel" class="bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 transition-colors">Batal</button>
                    <button type="submit" id="password-submit" class="bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors">Masuk</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Supabase SDK -->
    <script type="module">
        // --- SUPABASE CONFIG ---
        // SQL untuk membuat tabel (JALANKAN DI SUPABASE SQL EDITOR):
        /*
        -- 1. Buat tabel 'items'
        CREATE TABLE public.items (
          id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
          kode TEXT UNIQUE,
          nama TEXT,
          masalah TEXT,
          gambar TEXT,
          created_at TIMESTAMPTZ DEFAULT now()
        );

        -- 2. Aktifkan Row Level Security (RLS)
        -- NONAKTIFKAN INI JIKA ANDA INGIN AKSES MUDAH (TUTORIAL_MEMATIKAN_RLS.MD)
        -- ALTER TABLE public.items ENABLE ROW LEVEL SECURITY;

        -- 3. Buat policy agar semua (anon) bisa membaca data
        -- HAPUS JIKA RLS DIMATIKAN
        CREATE POLICY "Allow public read access"
          ON public.items
          FOR SELECT
          USING (true);

        -- 4. Buat policy agar semua (anon) bisa menambah, mengubah, dan menghapus data
        -- HAPUS JIKA RLS DIMATIKAN
        CREATE POLICY "Allow public full access"
          ON public.items
          FOR ALL
          USING (true)
          WITH CHECK (true);
        
        -- 5. SQL UNTUK MEMBUAT BUCKET STORAGE (dari tutorial_storage.md)
        -- CUKUP BUAT LEWAT UI: Buat bucket publik baru bernama 'gambar-barang'
        */

        const SUPABASE_URL = typeof __supabase_url !== 'undefined' ? __supabase_url : 'https://xzchpfbcmusknizzmgke.supabase.co';
        const SUPABASE_ANON_KEY = typeof __supabase_anon_key !== 'undefined' ? __supabase_anon_key : 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6Y2hwZmJjbXVza25penptZ2tlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyMTU3MjQsImV4cCI6MjA3NTc5MTcyNH0.g38f6c7R6YOMA2BNy4l9f2oWzB6JzIPAJ6uLF9Lh6a0';
        const BUCKET_NAME = 'gambar-barang';

        // --- Global Variables ---
        let supabase;
        let items = []; // Cache lokal untuk data
        let realtimeChannel; // Untuk menyimpan channel realtime Supabase

        // --- DOM Elements ---
        const roleSelectionView = document.getElementById('role-selection-view');
        const adminView = document.getElementById('admin-view');
        const operatorView = document.getElementById('operator-view');
        const connectionStatus = document.getElementById('connection-status');
        const adminRoleBtn = document.getElementById('admin-role-btn');
        const operatorRoleBtn = document.getElementById('operator-role-btn');
        const adminLogoutBtn = document.getElementById('admin-logout-btn');
        const operatorLogoutBtn = document.getElementById('operator-logout-btn');
        const itemForm = document.getElementById('item-form');
        const formTitle = document.getElementById('form-title');
        const submitBtn = document.getElementById('submit-btn');
        const cancelEditBtn = document.getElementById('cancel-edit-btn');
        const imagePreview = document.getElementById('image-preview');
        const imageInput = document.getElementById('gambar-barang');
        const itemListDiv = document.getElementById('item-list');
        const itemListContainer = document.getElementById('item-list-container'); // Container untuk event listener
        const operatorItemListDiv = document.getElementById('operator-item-list');
        const loadingSpinnerAdmin = document.getElementById('loading-spinner-admin');
        const loadingSpinnerOperator = document.getElementById('loading-spinner-operator');
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const searchResultDiv = document.getElementById('search-result');
        const operatorItemListContainer = document.getElementById('operator-item-list-container');
        const imageModal = document.getElementById('image-modal');
        const modalImg = document.getElementById('modal-img');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const zoomInBtn = document.getElementById('zoom-in-btn');
        const zoomOutBtn = document.getElementById('zoom-out-btn');
        const confirmModal = document.getElementById('confirm-modal');
        const confirmTitle = document.getElementById('confirm-title');
        const confirmMessage = document.getElementById('confirm-message');
        const confirmCancelBtn = document.getElementById('confirm-cancel');
        const confirmOkBtn = document.getElementById('confirm-ok');
        const menuBtnGlobal = document.getElementById('menu-btn-global');
        const menuSidebar = document.getElementById('menu-sidebar');
        const menuOverlay = document.getElementById('menu-overlay');
        const closeMenuBtn = document.getElementById('close-menu-btn');
        const menuHomeBtn = document.getElementById('menu-home-btn');
        const menuAdminBtn = document.getElementById('menu-admin-btn');
        const passwordModal = document.getElementById('password-modal');
        const passwordForm = document.getElementById('password-form');
        const passwordInput = document.getElementById('password-input');
        const passwordError = document.getElementById('password-error');
        const passwordCancelBtn = document.getElementById('password-cancel');

        let currentZoom = 1;
        
        // --- UTILITY FUNCTIONS ---
        function showView(view) {
            roleSelectionView.classList.add('hidden');
            adminView.classList.add('hidden');
            operatorView.classList.add('hidden');
            
            // Pusatkan tampilan pemilihan peran
            if (view === 'role') {
                roleSelectionView.classList.remove('hidden');
                document.getElementById('app').classList.add('justify-center');
            } else {
                document.getElementById('app').classList.remove('justify-center');
                if (view === 'admin') adminView.classList.remove('hidden');
                else if (view === 'operator') operatorView.classList.remove('hidden');
            }
        }
        
        function showConfirmation(config) {
            confirmTitle.textContent = config.title;
            confirmMessage.textContent = config.message;
            confirmOkBtn.textContent = config.okText || 'OK';
            confirmCancelBtn.textContent = config.cancelText || 'Batal';
            confirmCancelBtn.classList.toggle('hidden', !config.onCancel);
            confirmOkBtn.className = config.okClass || 'bg-red-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-red-600';

            confirmModal.classList.remove('hidden');

            const okHandler = () => {
                if (config.onOk) config.onOk();
                hideConfirmation();
            };
            
            const cancelHandler = () => {
                if (config.onCancel) config.onCancel();
                hideConfirmation();
            }

            confirmOkBtn.onclick = okHandler;
            confirmCancelBtn.onclick = cancelHandler;
        }

        function hideConfirmation() {
            confirmModal.classList.add('hidden');
            confirmOkBtn.onclick = null;
            confirmCancelBtn.onclick = null;
        }

        function openMenu() {
            menuOverlay.classList.remove('hidden');
            // Animate opacity
            setTimeout(() => menuOverlay.classList.add('opacity-100'), 10);
            menuSidebar.classList.add('open');
        }

        function closeMenu() {
            menuOverlay.classList.remove('opacity-100');
            menuSidebar.classList.remove('open');
            // Hide after transition
            setTimeout(() => menuOverlay.classList.add('hidden'), 300);
        }

        function showPasswordModal() {
            passwordInput.value = '';
            passwordError.classList.add('hidden');
            passwordModal.classList.remove('hidden');
            passwordInput.focus();
        }

        function hidePasswordModal() {
            passwordModal.classList.add('hidden');
        }

        // --- SUPABASE DATA HANDLING ---

        async function fetchAllItems() {
            if (!supabase) return;
            
            console.log("Fetching all items...");
            const { data, error } = await supabase
                .from('items')
                .select('*');
                // .order('created_at', { ascending: false }); // Hindari order by jika tidak ada indeks

            if (error) {
                console.error('Error fetching items:', error);
                const errorMsg = `<p class="text-red-500">Gagal mengambil data: ${error.message}</p>`;
                loadingSpinnerAdmin.innerHTML = errorMsg;
                loadingSpinnerOperator.innerHTML = errorMsg;
            } else {
                items = data || [];
                renderAdminList();
                renderOperatorList();
                loadingSpinnerAdmin.classList.add('hidden');
                loadingSpinnerOperator.classList.add('hidden');
            }
        }
        
        function setupRealtimeListener() {
            if (!supabase) return;

            console.log("Setting up Supabase realtime listener...");

            // Hentikan listener sebelumnya jika ada
            if (realtimeChannel) {
                supabase.removeChannel(realtimeChannel);
            }
            
            realtimeChannel = supabase
                .channel('public:items')
                .on(
                    'postgres_changes', 
                    { event: '*', schema: 'public', table: 'items' }, 
                    (payload) => {
                        console.log('Perubahan realtime terdeteksi:', payload);
                        
                        const idInForm = document.getElementById('item-id').value;
                        const idInFormNum = idInForm ? parseInt(idInForm, 10) : null;
                        
                        switch (payload.eventType) {
                            case 'INSERT':
                                items.push(payload.new);
                                break;
                            case 'UPDATE':
                                const updatedId = payload.new.id.toString();
                                items = items.map(item => item.id.toString() === updatedId ? payload.new : item);
                                // Jika data yg sedang diedit diubah orang lain, reset form
                                if (payload.new.id === idInFormNum) {
                                    resetForm();
                                }
                                break;
                            case 'DELETE':
                                const deletedId = payload.old.id.toString(); // Ubah ID yang dihapus ke string
                                items = items.filter(item => item.id.toString() !== deletedId); // Bandingkan sebagai string
                                
                                // Jika data yg sedang diedit dihapus, reset form
                                if (payload.old.id === idInFormNum) {
                                    resetForm();
                                }
                                break;
                        }
                        
                        // Sortir ulang data (opsional, jika perlu)
                        // items.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

                        renderAdminList();
                        renderOperatorList();
                    }
                )
                .subscribe();
            
            // Ambil data awal saat listener siap
            fetchAllItems();
        }

        // Fungsi baru untuk upload gambar ke Supabase Storage
        async function uploadImage(file) {
            if (!supabase) {
                throw new Error("Supabase client not initialized.");
            }
            
            // Buat nama file unik
            const fileName = `public/${Date.now()}-${file.name}`;

            // Upload ke bucket
            const { data: uploadData, error: uploadError } = await supabase
                .storage
                .from(BUCKET_NAME)
                .upload(fileName, file);

            if (uploadError) {
                console.error("Error uploading image:", uploadError);
                throw uploadError;
            }

            // Dapatkan URL publik
            const { data: publicUrlData } = supabase
                .storage
                .from(BUCKET_NAME)
                .getPublicUrl(uploadData.path);
            
            if (!publicUrlData || !publicUrlData.publicUrl) {
                throw new Error("Could not get public URL for uploaded image.");
            }

            console.log("Image uploaded, URL:", publicUrlData.publicUrl);
            return { url: publicUrlData.publicUrl, path: uploadData.path };
        }
        
        async function addItem(itemData) {
            if (!supabase) return;
            try {
                const { error } = await supabase.from('items').insert([itemData]);
                if (error) throw error;
            } catch (e) {
                console.error("Error adding document: ", e);
                showConfirmation({ title: 'Error', message: `Gagal menyimpan data: ${e.message}`, okText: 'OK' });
            }
        }
        
        async function updateItem(id, itemData) {
            if (!supabase) return;
            try {
                const { error } = await supabase.from('items').update(itemData).eq('id', id);
                if (error) throw error;
            } catch(e) {
                console.error("Error updating document: ", e);
                showConfirmation({ title: 'Error', message: `Gagal mengupdate data: ${e.message}`, okText: 'OK' });
            }
        }
        
        async function deleteItem(item) {
            if (!supabase) return;
            try {
                // 1. Hapus data dari tabel 'items'
                const { error: dbError } = await supabase.from('items').delete().eq('id', item.id);
                if (dbError) throw dbError;

                // 2. Hapus gambar dari Storage (jika ada)
                if (item.gambar) {
                    // Ekstrak path file dari URL
                    // URL: .../storage/v1/object/public/gambar-barang/public/1729739502220-myimage.png
                    // Path: public/1729739502220-myimage.png
                    const urlParts = item.gambar.split(`/${BUCKET_NAME}/`);
                    if (urlParts.length > 1) {
                        const filePath = urlParts[1];
                        console.log("Menghapus file dari storage:", filePath);
                        const { error: storageError } = await supabase
                            .storage
                            .from(BUCKET_NAME)
                            .remove([filePath]);
                        
                        if (storageError) {
                            // Jangan blokir jika gagal hapus file, tapi catat errornya
                            console.warn("Gagal menghapus file di storage:", storageError.message);
                        }
                    }
                }
            } catch(e) {
                 console.error("Error deleting document: ", e);
                 showConfirmation({ title: 'Error', message: `Gagal menghapus data: ${e.message}`, okText: 'OK' });
            }
        }

        // --- RENDER FUNCTIONS ---
        function renderAdminList() {
            if (!itemListDiv) return;
            itemListDiv.innerHTML = '';
            
            if (items.length === 0 && !loadingSpinnerAdmin.classList.contains('hidden')) {
                // Jangan tampilkan apa-apa jika loading belum selesai
            } else if (items.length === 0) {
                itemListDiv.innerHTML = `<p class="text-slate-500 col-span-full text-center py-10">Belum ada data barang.</p>`;
                return;
            }

            items.forEach(item => {
                const itemCard = `
                    <div class="card-item group bg-white rounded-2xl shadow-lg overflow-hidden border border-slate-200 transition-all duration-300 ease-in-out hover:shadow-2xl hover:border-indigo-300 transform hover:-translate-y-1">
                        <div class="overflow-hidden h-48">
                            <img src="${item.gambar || 'https://placehold.co/400x300/e2e8f0/64748b?text=No+Image'}" alt="${item.nama}" class="w-full h-full object-cover cursor-pointer bg-slate-200 transition-transform duration-300 ease-in-out group-hover:scale-110" onclick="window.app.showImageModal('${item.gambar || ''}')" onerror="this.src='https://placehold.co/400x300/e2e8f0/64748b?text=No+Image'; this.onerror=null;">
                        </div>
                        <div class="p-5">
                            <h3 class="font-semibold text-lg text-slate-800 mb-1 truncate">${item.nama || 'Nama Barang'}</h3>
                            <span class="inline-block bg-indigo-100 text-indigo-700 text-xs font-semibold px-2.5 py-0.5 rounded-full mb-2">Kode: ${item.kode || 'N/A'}</span>
                            <p class="text-slate-500 text-sm break-words min-h-[60px] h-20 overflow-hidden">${item.masalah || '-'}</p>
                            <div class="flex justify-end space-x-2 mt-4 border-t pt-4">
                                <button class="edit-btn p-2 text-slate-500 hover:text-indigo-600 rounded-full hover:bg-indigo-50 transition-colors" data-id="${item.id}" title="Edit">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="pointer-events-none"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" class="pointer-events-none"></path></svg>
                                </button>
                                <button class="delete-btn p-2 text-slate-500 hover:text-red-600 rounded-full hover:bg-red-50 transition-colors" data-id="${item.id}" title="Hapus">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="pointer-events-none"><polyline points="3 6 5 6 21 6" class="pointer-events-none"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" class="pointer-events-none"></path><line x1="10" y1="11" x2="10" y2="17" class="pointer-events-none"></line><line x1="14" y1="11" x2="14" y2="17" class="pointer-events-none"></line></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                itemListDiv.innerHTML += itemCard;
            });

            // Event listeners tidak lagi ditambahkan di sini, ditangani oleh listener global
        }
        
        function renderOperatorList() {
            if (!operatorItemListDiv) return;
            operatorItemListDiv.innerHTML = '';
            
            if (items.length === 0 && !loadingSpinnerOperator.classList.contains('hidden')) {
                 // Jangan tampilkan apa-apa jika loading belum selesai
            } else if (items.length === 0) {
                operatorItemListDiv.innerHTML = `<p class="text-slate-500 col-span-full text-center py-10">Belum ada data barang.</p>`;
                return;
            }

            items.forEach(item => {
                const itemCard = `
                    <div class="card-item group bg-white rounded-2xl shadow-lg overflow-hidden border border-slate-200 transition-all duration-300 ease-in-out hover:shadow-2xl hover:border-indigo-300 transform hover:-translate-y-1">
                        <div class="overflow-hidden h-48">
                            <img src="${item.gambar || 'https://placehold.co/400x300/e2e8f0/64748b?text=No+Image'}" alt="${item.nama}" class="w-full h-full object-cover cursor-pointer bg-slate-200 transition-transform duration-300 ease-in-out group-hover:scale-110" onclick="window.app.showImageModal('${item.gambar || ''}')" onerror="this.src='https://placehold.co/400x300/e2e8f0/64748b?text=No+Image'; this.onerror=null;">
                        </div>
                        <div class="p-5">
                            <h3 class="font-semibold text-lg text-slate-800 mb-1 truncate">${item.nama || 'Nama Barang'}</h3>
                            <span class="inline-block bg-indigo-100 text-indigo-700 text-xs font-semibold px-2.5 py-0.5 rounded-full mb-2">Kode: ${item.kode || 'N/A'}</span>
                            <p class="text-slate-500 text-sm break-words min-h-[60px] h-20 overflow-hidden">${item.masalah || '-'}</p>
                        </div>
                    </div>
                `;
                operatorItemListDiv.innerHTML += itemCard;
            });
        }
        
        function displaySearchResult(item) {
             if (item) {
                 searchResultDiv.innerHTML = `
                     <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-200">
                         <div class="md:flex">
                            <div class="md:w-1/2">
                                <img src="${item.gambar || 'https://placehold.co/600x400/e2e8f0/64748b?text=No+Image'}" alt="${item.nama}" class="w-full h-64 md:h-full object-cover cursor-pointer bg-slate-200" onclick="window.app.showImageModal('${item.gambar || ''}')" onerror="this.src='https://placehold.co/600x400/e2e8f0/64748b?text=No+Image'; this.onerror=null;">
                            </div>
                            <div class="p-8 md:w-1/2 flex flex-col justify-center">
                                 <h3 class="font-bold text-3xl text-slate-900 mb-2">${item.nama || 'Nama Barang'}</h3>
                                 <span class="inline-block bg-indigo-100 text-indigo-700 text-sm font-semibold px-3 py-1 rounded-full mb-6 w-max">Kode: ${item.kode || 'N/A'}</span>
                                 <h4 class="font-semibold text-slate-800 text-lg mb-2">Detail Masalah:</h4>
                                 <p class="text-slate-600 mt-2 text-base">${item.masalah || '-'}</p>
                             </div>
                         </div>
                     </div>
                 `;
             } else {
                 searchResultDiv.innerHTML = `<p class="text-center text-red-600 font-semibold bg-white p-8 rounded-2xl shadow-lg border border-red-200">Barang dengan kode tersebut tidak ditemukan.</p>`;
             }
             
             searchResultDiv.classList.remove('hidden');
             operatorItemListContainer.classList.add('hidden');
        }
        
        // Definisikan 'app' pada window agar bisa diakses oleh onclick di HTML
        window.app = {
            showImageModal: (src) => {
                if (!src) return;
                modalImg.src = src;
                currentZoom = 1;
                modalImg.style.transform = 'scale(1)';
                imageModal.classList.remove('hidden');
                document.body.classList.add('modal-open');
            }
        };

        function hideImageModal() {
            imageModal.classList.add('hidden');
            document.body.classList.remove('modal-open');
        }

        // --- EVENT HANDLERS ---
        
        // Listener global untuk tombol edit/hapus
        function handleGlobalClick(e) {
            // Cek tombol edit
            const editBtn = e.target.closest('.edit-btn');
            if (editBtn) {
                handleEditClick(editBtn);
                return;
            }

            // Cek tombol hapus
            const deleteBtn = e.target.closest('.delete-btn');
            if (deleteBtn) {
                handleDeleteClick(deleteBtn);
                return;
            }
        }
        
        function handleSearch() {
            const query = searchInput.value.trim();
            if (!query) {
                // Jika query kosong, bersihkan pencarian (tampilkan semua item)
                clearSearch();
                return;
            }
            const foundItem = items.find(item => item.kode.toLowerCase() === query.toLowerCase());
            displaySearchResult(foundItem);
        }
        
        function clearSearch() {
            searchInput.value = '';
            searchResultDiv.innerHTML = '';
            searchResultDiv.classList.add('hidden');
            operatorItemListContainer.classList.remove('hidden');
        }

        async function handleFormSubmit(e) {
            e.preventDefault();
            const id = document.getElementById('item-id').value;
            const file = imageInput.files[0];

            let itemData = {
                kode: document.getElementById('kode-barang').value,
                nama: document.getElementById('nama-barang').value,
                masalah: document.getElementById('permasalahan').value,
                // gambar akan ditambahkan nanti
            };
            
            submitBtn.disabled = true;
            submitBtn.textContent = 'Menyimpan...';

            try {
                let imageUrl = undefined;
                let imagePath = undefined; // Path untuk delete nanti

                if (file) {
                    // 1. Upload gambar baru
                    console.log("Mengupload gambar baru...");
                    const { url, path } = await uploadImage(file);
                    imageUrl = url;
                    // Path tidak disimpan di DB, hanya URL
                }

                if (id) {
                    // UPDATE
                    const existingItem = items.find(item => item.id.toString() === id);
                    if (!existingItem) {
                        throw new Error("Item tidak ditemukan untuk di-update.");
                    }
                    
                    // Jika ada gambar baru, hapus gambar lama dari storage
                    if (file && existingItem.gambar) {
                        console.log("Menghapus gambar lama...");
                        const urlParts = existingItem.gambar.split(`/${BUCKET_NAME}/`);
                        if (urlParts.length > 1) {
                            const oldPath = urlParts[1];
                            await supabase.storage.from(BUCKET_NAME).remove([oldPath]);
                        }
                    }

                    // Siapkan data update
                    const updatedData = { ...itemData };
                    if (imageUrl !== undefined) {
                        updatedData.gambar = imageUrl; // Update dengan URL baru
                    } else {
                        // Jangan ubah gambar jika tidak ada file baru DAN imagePreview tidak dihapus
                        // Jika user menghapus gambar (tapi tidak upload baru), kita harus tangani
                        // Untuk saat ini, kita asumsikan jika tidak ada file, gambar lama dipertahankan
                        updatedData.gambar = existingItem.gambar; // Pertahankan URL lama
                    }
                    
                    await updateItem(id, updatedData);

                } else {
                    // ADD NEW
                    if (imageUrl !== undefined) {
                        itemData.gambar = imageUrl;
                    }
                    await addItem(itemData);
                }

                resetForm();

            } catch (error) {
                console.error("Gagal submit form:", error);
                showConfirmation({ title: 'Error', message: `Gagal menyimpan: ${error.message}`, okText: 'OK' });
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Simpan';
            }
        }
        
        function handleEditClick(btn) {
            const id = btn.dataset.id;
            // Bandingkan sebagai string karena dataset selalu string
            const item = items.find(i => i.id.toString() === id); 
            
            if (item) {
                document.getElementById('item-id').value = item.id;
                document.getElementById('kode-barang').value = item.kode;
                document.getElementById('nama-barang').value = item.nama;
                document.getElementById('permasalahan').value = item.masalah;
                imagePreview.src = item.gambar || '';
                imagePreview.classList.toggle('hidden', !item.gambar);
                imageInput.value = ''; // Hapus file input sebelumnya
                formTitle.textContent = "Edit Data Barang";
                submitBtn.textContent = "Update";
                cancelEditBtn.classList.remove('hidden');
                // Scroll ke atas form
                itemForm.scrollIntoView({ behavior: 'smooth' });
            } else {
                // Ini adalah debug error dari sebelumnya
                showConfirmation({ title: 'Debug Error', message: `Tombol Edit diklik (ID: ${id}), tapi data item tidak ditemukan di cache lokal. Coba refresh halaman.`, okText: 'OK' });
            }
        }

        function handleDeleteClick(btn) {
            const id = btn.dataset.id;
            // Bandingkan sebagai string
            const item = items.find(i => i.id.toString() === id); 
            
            if (item) {
                 showConfirmation({
                     title: 'Hapus Barang', 
                     message: `Anda yakin ingin menghapus data untuk "${item.nama}" (Kode: ${item.kode})?`, 
                     okText: 'Ya, Hapus',
                     okClass: 'bg-red-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-red-700',
                     onOk: () => deleteItem(item), // Kirim seluruh objek item
                     onCancel: () => {}
                 });
            } else {
                 // Ini adalah debug error dari sebelumnya
                 showConfirmation({ title: 'Debug Error', message: `Tombol Hapus diklik (ID: ${id}), tapi data item tidak ditemukan di cache lokal. Coba refresh halaman.`, okText: 'OK' });
            }
        }
        
        function resetForm() {
            itemForm.reset();
            document.getElementById('item-id').value = '';
            imagePreview.src = '';
            imagePreview.classList.add('hidden');
            formTitle.textContent = "Tambah Barang Baru";
            submitBtn.textContent = "Simpan";
            cancelEditBtn.classList.add('hidden');
        }
        
        // --- INITIALIZATION ---
        async function init() {
            // Tampilan default
            showView('operator'); // Mulai dari tampilan operator
            // showView('role'); // Uncomment ini jika ingin mulai dari pemilihan peran

            // Tombol Peran (disembunyikan, tapi logikanya ada)
            adminRoleBtn.addEventListener('click', () => {
                showPasswordModal(); // Tampilkan prompt password
            });
            operatorRoleBtn.addEventListener('click', () => showView('operator'));

            // Tombol Logout
            adminLogoutBtn.addEventListener('click', () => showView('operator'));
            operatorLogoutBtn.addEventListener('click', clearSearch); // Tombol ini sekarang membersihkan pencarian
            
            // Tombol Menu
            menuBtnGlobal.addEventListener('click', openMenu);
            closeMenuBtn.addEventListener('click', closeMenu);
            menuOverlay.addEventListener('click', closeMenu);
            
            menuHomeBtn.addEventListener('click', (e) => {
                e.preventDefault();
                showView('operator');
                clearSearch();
                closeMenu();
            });
            menuAdminBtn.addEventListener('click', (e) => {
                e.preventDefault();
                closeMenu();
                showPasswordModal();
            });
            
            // Modal Password
            passwordForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const pass = passwordInput.value;
                if (pass === 'shinpo01') { // Kata sandi di-hardcode
                    hidePasswordModal();
                    showView('admin');
                } else {
                    passwordError.classList.remove('hidden');
                }
            });
            passwordCancelBtn.addEventListener('click', hidePasswordModal);

            // Form Admin
            itemForm.addEventListener('submit', handleFormSubmit);
            cancelEditBtn.addEventListener('click', resetForm);
            imageInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        imagePreview.src = event.target.result;
                        imagePreview.classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                } else {
                    imagePreview.src = '';
                    imagePreview.classList.add('hidden');
                }
            });
            
            // TAMBAHKAN LISTENER GLOBAL DI SINI
            // Kita dengarkan di 'app' karena item-list-container mungkin tersembunyi
            document.getElementById('app').addEventListener('click', handleGlobalClick);

            // Pencarian Operator
            searchBtn.addEventListener('click', handleSearch);
            searchInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') handleSearch();
            });
            
            // Modal Gambar
            closeModalBtn.addEventListener('click', hideImageModal);
            imageModal.addEventListener('click', (e) => {
                if (e.target === imageModal) hideImageModal();
            });
            
            zoomInBtn.addEventListener('click', () => {
                currentZoom = Math.min(3, currentZoom + 0.2);
                modalImg.style.transform = `scale(${currentZoom})`;
            });
            zoomOutBtn.addEventListener('click', () => {
                currentZoom = Math.max(0.5, currentZoom - 0.2);
                modalImg.style.transform = `scale(${currentZoom})`;
            });

            // Inisialisasi Supabase
            if (SUPABASE_URL && SUPABASE_ANON_KEY) {
                try {
                    // Gunakan createClient dari objek global window.supabase
                    supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                    
                    connectionStatus.textContent = "Menghubungkan...";
                    connectionStatus.classList.add('text-yellow-400');

                    // Setup listener realtime
                    setupRealtimeListener(); // Ini akan memanggil fetchAllItems()
                    
                    connectionStatus.textContent = "Terhubung";
                    connectionStatus.classList.remove('text-yellow-400');
                    connectionStatus.classList.add('text-green-400');

                } catch(e) {
                    console.error("Supabase Initialization Error:", e);
                    const errorMsg = `<p class="text-red-500">Konfigurasi Supabase tidak valid: ${e.message}</p>`;
                    loadingSpinnerAdmin.innerHTML = errorMsg;
                    loadingSpinnerOperator.innerHTML = errorMsg;
                    connectionStatus.textContent = "Gagal terhubung";
                    connectionStatus.classList.add('text-red-400');
                }
            } else {
                console.warn("Mode Demo. Harap konfigurasi Supabase.");
                const demoMsg = `<p class="text-orange-500">Mode Demo. Harap konfigurasi Supabase.</p>`;
                loadingSpinnerAdmin.innerHTML = demoMsg;
                loadingSpinnerOperator.innerHTML = demoMsg;
                connectionStatus.textContent = "Mode Demo";
                connectionStatus.classList.add('text-orange-400');
            }
        }
        
        // Mulai aplikasi
        init();
    </script>

</body>
</html>

